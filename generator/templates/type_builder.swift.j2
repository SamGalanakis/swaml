// Generated by BAML - do not edit
// swift-format-ignore-file

import Foundation
import SWAML

/// TypeBuilder for this BAML schema.
/// Use this to add values to dynamic enums at runtime.
///
/// Example:
/// ```swift
/// let tb = BamlTypeBuilder()
/// tb.MomentId.addValue("moment_123")
/// tb.PatternId.addValue("pattern_456")
///
/// let result = try await client.selectTopMoments(..., typeBuilder: tb)
/// ```
public final class BamlTypeBuilder: TypeBuilder, @unchecked Sendable {
    public init() {
        super.init(
            classes: Set([
{% for c in classes %}
                "{{ c.name }}"{% if !loop.last %},{% endif %}

{% endfor %}
            ]),
            enums: Set([
{% for e in enums %}
                "{{ e.name }}"{% if !loop.last %},{% endif %}

{% endfor %}
            ])
        )
    }

    // MARK: - Dynamic Enum Accessors
{% for e in enums %}
{% if e.dynamic %}

    /// Dynamic enum builder for {{ e.name }}.
    /// Use `addValue(_:)` to add values at runtime.
    public var {{ e.name }}: DynamicEnumBuilder {
        enumBuilder("{{ e.name }}")
    }
{% endif %}
{% endfor %}

    // MARK: - Static Enum Viewers
{% for e in enums %}
{% if !e.dynamic %}

    /// Static enum viewer for {{ e.name }}.
    /// Use to access predefined values.
    public var {{ e.name }}: StaticEnumViewer {
        StaticEnumViewer(
            name: "{{ e.name }}",
            values: [
{% for v in e.values %}
                EnumValue(name: "{{ v.name }}"{% if v.alias.is_some() %}, alias: "{{ v.alias.as_ref().unwrap() }}"{% endif %}){% if !loop.last %},{% endif %}

{% endfor %}
            ]
        )
    }
{% endif %}
{% endfor %}

    // MARK: - Class Type Viewers
{% for c in classes %}

    /// Type viewer for {{ c.name }}.
    /// Use `.type()` to get a FieldType reference.
    public var {{ c.name }}: ClassTypeViewer {
        ClassTypeViewer(name: "{{ c.name }}")
    }
{% endfor %}
}

/// Viewer for schema-defined classes (provides type references)
public struct ClassTypeViewer: Sendable {
    /// Name of the class
    public let name: String

    public init(name: String) {
        self.name = name
    }

    /// Get a FieldType reference to this class
    public func type() -> FieldType {
        .reference(name)
    }
}

// MARK: - Convenience Extensions

extension BamlTypeBuilder {
    /// Create a new TypeBuilder and configure it with a closure
    public static func build(_ configure: (BamlTypeBuilder) -> Void) -> BamlTypeBuilder {
        let tb = BamlTypeBuilder()
        configure(tb)
        return tb
    }
}
